<ng-container *ngIf="showForm; else noItems">
  <form [formGroup]="form">
    <div [ngClass]="{ red: name?.invalid && name?.dirty, green: name?.valid }">
      <app-input
        formControlName="name"
        label="Name:"
        placeholder="Name"
        type="text"
      >
      </app-input>
    </div>
    <mat-error *ngIf="name?.invalid && name?.dirty">{{
      errorMessage.name
    }}</mat-error>
    <app-input
      formControlName="email"
      label="Email:"
      placeholder="Email"
      type="email"
    ></app-input>
    <mat-error *ngIf="email?.invalid && email?.dirty">{{
      errorMessage.email
    }}</mat-error>
    <app-input
      formControlName="phone"
      label="Phone:"
      placeholder="Phone"
      type="tel"
    ></app-input>
    <mat-error *ngIf="phone?.invalid && phone?.dirty">{{
      errorMessage.phone
    }}</mat-error>
    <app-input
      formControlName="address"
      label="Address:"
      placeholder="Address"
      type="text"
    ></app-input>
    <mat-error *ngIf="address?.invalid && address?.dirty">{{
      errorMessage.address
    }}</mat-error>
  </form>
  <app-cart-contents></app-cart-contents>
  <h3>Total price: {{ price$ | async | currency }}</h3>
  <app-button
    [disabled]="form.invalid"
    label="submit"
    type="primary"
    (customClick)="handleSubmit()"
  ></app-button>
</ng-container>

<ng-template #noItems>
  <h2>The cart is empty</h2>
</ng-template>
